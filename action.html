<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForgeSteel Viewer</title>
    <!-- Using Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the page */
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            background-color: #252525;
            color: #e0e0e0;
        }
        /* Make sure the views take up the full space */
        .view {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="font-sans">

    <!-- Instructions View -->
    <div id="instructionsView" class="view flex flex-col items-center justify-center p-3">
        <h1 class="text-lg font-bold mb-3 text-center">OBR ForgeSteel Character Manager</h1>
        <div class="w-full max-w-sm text-left">
            <h2 class="text-base font-semibold mb-2">Instructions:</h2>
            <ol id="instructionList" class="list-decimal list-inside text-xs space-y-2 bg-gray-800/50 p-3 rounded-lg">
                <li>Open <a href="https://andyaiken.github.io/forgesteel/#/hero" target="_blank" rel="noopener noreferrer" class="text-indigo-400 hover:underline">ForgeSteel</a> in a new tab.</li>
                <li>Create your character if needed. Otherwise, open your character page.</li>
                <li>Click the 'Export' drop down menu and choose 'Export As Data'.</li>
                <li>Navigate back to the OBR ForgeSteel Character Manager.</li>
                <li>Click the button below to Proceed to Hero Management.</li>
                <li>Click the 'Add' button and choose 'Import a Hero File'.</li>
                <li>At the end of your session, follow steps 1-3 again inside the OBR ForgeSteel Character Manager to save any changes from your session.</li>
            </ol>
            <div class="text-center mt-2">
                 <a id="downloadLink" href="#" download="charactermanager.txt" class="text-xs text-indigo-400 hover:underline">Download these instructions</a>
            </div>
        </div>
        <button 
            id="loadHeroButton"
            class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 text-sm mt-3"
        >
            Proceed to Hero Management
        </button>
    </div>

    <!-- Iframe View (initially hidden) -->
    <div id="iframeView" class="view hidden">
        <iframe 
            id="siteFrame"
            src="https://andyaiken.github.io/forgesteel/#/hero"
            class="w-full h-full border-0"
            frameborder="0">
                <p>Your browser does not support iframes.</p>
        </iframe>
    </div>

    <script>
        // Get references to the HTML elements
        const instructionsView = document.getElementById('instructionsView');
        const iframeView = document.getElementById('iframeView');
        const loadHeroButton = document.getElementById('loadHeroButton');
        const downloadLink = document.getElementById('downloadLink');

        // --- Functionality for switching views ---
        loadHeroButton.addEventListener('click', () => {
            instructionsView.classList.add('hidden');
            iframeView.classList.remove('hidden');
        });

        // --- Functionality for the download link ---
        function setupDownloadLink() {
            const instructionsText = [
                "OBR ForgeSteel Character Manager Instructions",
                "---------------------------------------------",
                "",
                "1. Open ForgeSteel in a new tab.",
                "2. Create your character if needed. Otherwise, open your character page.",
                "3. Click the 'Export' drop down menu and choose 'Export As Data'.",
                "4. Navigate back to the OBR ForgeSteel Character Manager.",
                "5. Click the button below to Proceed to Hero Management.",
                "6. Click the 'Add' button and choose 'Import a Hero File'.",
                "7. At the end of your session, follow steps 1-3 again inside the OBR ForgeSteel Character Manager to save any changes from your session."
            ].join('\n');

            // Create a data URL for the text content that can be downloaded
            const dataUrl = 'data:text/plain;charset=utf-8,' + encodeURIComponent(instructionsText);

            // Set the href for the download link
            downloadLink.href = dataUrl;
        }

        // Run the function to set up the link when the page loads
        setupDownloadLink();
    </script>

</body>
</html>
